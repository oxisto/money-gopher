syntax = "proto3";

package mgo.portfolio.v1;

import "google/protobuf/empty.proto";
import "google/protobuf/field_mask.proto";

message PortfolioCreateMessage { string name = 1; }

message Portfolio { string name = 1; }

service PortfolioService {
  rpc CreatePortfolio(PortfolioCreateMessage) returns (Portfolio);
}

message Security {
  // Name contains the unique resource name. For a stock or bond, this should be
  // an ISIN.
  string name = 1;

  // DisplayName contains the human readable name.
  string display_name = 2;

  repeated ListedSecurity listed_on = 4;
}

message ListedSecurity {
  string ticker = 3;
  string currency = 4;
}

message ListSecuritiesRequest {}

message ListSecuritiesResponse { repeated Security securities = 1; }

message GetSecurityRequest { string name = 1; }

message CreateSecurityRequest { Security security = 1; }

message UpdateSecurityRequest {
  Security security = 1;
  google.protobuf.FieldMask update_mask = 2;
}

message DeleteSecurityRequest { string name = 1; }

service SecuritiesService {
  rpc ListSecurities(ListSecuritiesRequest) returns (ListSecuritiesResponse) {
    option idempotency_level = NO_SIDE_EFFECTS;
  };
  rpc GetSecurity(GetSecurityRequest) returns (Security) {
    option idempotency_level = NO_SIDE_EFFECTS;
  };
  rpc CreateSecurity(CreateSecurityRequest) returns (Security);
  rpc UpdateSecurity(UpdateSecurityRequest) returns (Security);
  rpc DeleteSecurity(DeleteSecurityRequest) returns (google.protobuf.Empty);
}